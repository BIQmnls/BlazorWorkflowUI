@using Microsoft.AspNetCore.Components
@using BlazorWorkflowUI.Models

<MudPaper Class="mt-2 pa-4">
    <MudTimeline TimelinePosition="TimelinePosition.Left" TimelineAlign="TimelineAlign.Start">
        <MudTimelineItem Icon="@Icons.Material.Filled.PlayArrow" >
            <ChildContent>
                <MudText>Trigger: @Workflow.Trigger.ActivityType</MudText>
            </ChildContent>
        </MudTimelineItem>
        @foreach (var step in Workflow.Steps)
        {
            <MudTimelineItem Icon="@Icons.Material.Filled.ChevronRight">
                <ChildContent>
                    @if (step.ElseActivityType != null)
                    {
                        <WorkflowBranch Step="step" />
                    }
                    else
                    {
                        <MudText Typo="Typo.caption">Condition: @step.Condition</MudText>
                        <MudText>@step.ActivityType</MudText>
                        @if (step.ActivityType == "WaitForDocuments")
                        {
                            <MudText Typo="Typo.caption">Wait: @step.DelaySeconds s</MudText>
                        }
                    }
                </ChildContent>
            </MudTimelineItem>
        }
    </MudTimeline>
</MudPaper>

@code {
    [Parameter]
    public WorkflowModel Workflow { get; set; } = new();
}
